<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GIFT-MD PAIRING SITE</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    :root {
      --primary: linear-gradient(135deg, #FF4500, #228B22);
      --bg: #D2691E;
      --glass: rgba(255, 255, 255, 0.05);
      --text: #ffffff;
      --muted: #708090;
      --highlight: #FF1493;
      --radius: 16px;
      --blur: 12px;
      --transition: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      --glow: 0 0 15px rgba(0, 212, 255, 0.3);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      overflow-x: hidden;
      color: var(--text);
      padding: 80px 20px 120px;
    }

    .background-image {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -3;
      filter: blur(8px) brightness(0.6);
      transform: scale(1.1);
    }

    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background: var(--glass);
      backdrop-filter: blur(var(--blur));
      z-index: 100;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo-img {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid rgba(0, 212, 255, 0.3);
      box-shadow: var(--glow);
    }

    .logo-text {
      font-size: 1.5rem;
      font-weight: 700;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: var(--glow);
    }

    .battery-container {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 50px;
      padding: 0.5rem 1rem;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-size: 0.9rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .battery-icon {
      color: var(--highlight);
      font-size: 1.2rem;
    }

    .main-content {
      width: 100%;
      max-width: 500px;
      display: flex;
      flex-direction: column;
      gap: 2rem;
      position: relative;
      z-index: 1;
    }

    .box {
      background: var(--glass);
      backdrop-filter: blur(var(--blur));
      border-radius: var(--radius);
      padding: 2rem;
      text-align: center;
      box-shadow: 0 10px 35px rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: var(--transition);
    }

    .box:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5), var(--glow);
    }

    .box h2 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
      background: var(--primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: var(--glow);
    }

    .box h5 {
      color: var(--muted);
      margin-bottom: 1.5rem;
      font-weight: normal;
    }

    .input-container {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }

    .input-container input {
      flex: 1;
      padding: 1rem;
      border-radius: var(--radius);
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(0, 0, 0, 0.3);
      color: var(--text);
      font-family: inherit;
      transition: var(--transition);
    }

    .input-container input:focus {
      outline: none;
      border-color: var(--highlight);
      box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.2);
    }

    .input-container button {
      padding: 1rem 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }

    .input-container button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    #pair-result {
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: var(--radius);
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #copy-code {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--highlight);
      padding: 0.6rem 1.2rem;
      border-radius: 50px;
      color: white;
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
      margin-top: 1rem;
      display: none;
    }

    #copy-code:hover {
      background: rgba(0, 212, 255, 0.1);
      box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
    }

    .music-player {
      width: 100%;
      max-width: 500px;
      background: var(--glass);
      backdrop-filter: blur(var(--blur));
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 90;
      text-align: center;
      margin-top: 2rem;
    }

    .music-player h3 {
      color: var(--highlight);
      margin-bottom: 0.5rem;
      font-size: 1.2rem;
    }

    .music-title {
      font-weight: bold;
      font-size: 1.1rem;
      margin-bottom: 0.3rem;
    }

    .music-subtitle {
      color: var(--muted);
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .play-btn {
      background: var(--primary);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      transition: var(--transition);
    }

    .play-btn:hover {
      transform: scale(1.1);
    }

    .play-btn i {
      color: white;
      font-size: 1.5rem;
    }

    .time-display {
      margin-top: 1rem;
      font-size: 0.9rem;
      color: var(--muted);
    }

    @media (max-width: 768px) {
      .header {
        padding: 0.8rem 1rem;
      }
      
      .logo-text {
        font-size: 1.2rem;
      }
      
      body {
        padding: 70px 15px 100px;
      }
      
      .input-container {
        flex-direction: column;
      }
      
      .input-container button {
        width: 100%;
      }
      
      .music-player {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  
  <img src="https://url.bwmxmd.online/Adams.twcferrg.jpg" alt="GIFT MD Background" class="background-image">

    <header class="header">
    <div class="logo-container">
      <img src="https://files.catbox.moe/dmz9gd.jpeg" alt="GIFT MD Logo" class="logo-img">
      <div class="logo-text">ğ—šğ—œğ—™ğ—§ ğ— ğ——-ğğ€ğˆğ‘ğˆğğ†</div>
    </div>
    
    <div class="battery-container">
      <i class="fas fa-battery-full battery-icon" id="battery-icon"></i>
      <span id="battery-level">--%</span>
    </div>
  </header>

  <div class="main-content">
    <div class="box">
      <h2>PAIRING CODE</h2>
      <h5>Gift-MD</h5>
      <p>Please enter your number without country code</p>
      
      <div class="input-container">
        <input type="number" id="number" placeholder="input phone number" required>
        <button id="submit">ğ—šğ—²ğ—»ğ—²ğ—¿ğ—®ğ˜ğ—² ğ—°ğ—¼ğ—±ğ—²</button>
      </div>
      
      <div id="pair-result"></div>
      
      <button id="copy-code" onclick="copyCode()">COPY CODE</button>
    </div>

    <div class="music-player">
      <h3>PLAY NOW</h3>
      <div class="music-title">PLAY SONG</div>
      <div class="music-subtitle">by GIFT-MD</div>
      <button class="play-btn" onclick="togglePlay()">
        <i class="fas fa-pause" id="play-icon"></i>
      </button>
      <div class="time-display" id="time1">0:00</div>
      <div class="music-subtitle">PAIRING SONG</div>
      <audio id="audio1" src="https://files.catbox.moe/f8hh1z.mp3" loop></audio>
    </div>
  </div>

        
              <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
<script>
  const pairResult = document.getElementById("pair-result");
  const submitBtn = document.getElementById("submit");
  const numberInput = document.getElementById("number");
  const copyCodeBtn = document.getElementById("copy-code");
  const batteryLevel = document.getElementById("battery-level");
  const batteryIcon = document.getElementById("battery-icon");

  async function copyCode() {
    // âœ… ENHANCED: Extract code properly from the result
    const codeText = pairResult.innerText.match(/\b[A-Z0-9]{6,8}\b/);
    const code = codeText ? codeText[0] : pairResult.innerText.replace(/[^A-Z0-9]/g, '');
    
    try {
      await navigator.clipboard.writeText(code);
      copyCodeBtn.innerText = "âœ… COPIED!";
      copyCodeBtn.style.backgroundColor = "#00ff00";
      copyCodeBtn.style.color = "#000";
      setTimeout(() => {
        copyCodeBtn.innerText = "COPY CODE";
        copyCodeBtn.style.backgroundColor = "";
        copyCodeBtn.style.color = "";
      }, 2000);
    } catch (err) {
      console.error('Failed to copy:', err);
      alert('Code: ' + code);
    }
  }

  submitBtn.addEventListener("click", async (e) => {
    e.preventDefault();
    
    // âœ… Clear previous results
    pairResult.innerHTML = '';
    copyCodeBtn.style.display = "none";
    
    if (!numberInput.value) {
      pairResult.innerHTML = '<p style="color:var(--highlight)">âš ï¸ Enter your WhatsApp number without Country Code</p>';
      return;
    }
    
    const cleanNumber = numberInput.value.replace(/[^0-9]/g, "");
    
    if (cleanNumber.length < 10) {
      pairResult.innerHTML = '<p style="color:#ff5555">âŒ Invalid Number (minimum 10 digits)</p>';
      return;
    }
    
    let formattedNumber = "";
    const digits = cleanNumber.split('');
    digits.forEach((digit, index) => {
      formattedNumber += digit;
      if (index === 2 || index === 7) {
        formattedNumber += " ";
      }
    });
    
    numberInput.type = "text";
    numberInput.value = "+" + formattedNumber;
    numberInput.style.color = "var(--highlight)";
    
    pairResult.innerHTML = '<p style="color:var(--highlight);">â³ Generating pairing code...<br><small style="color:var(--muted);">Please wait up to 60 seconds</small></p>';
    
    console.log('ğŸ” Requesting code for:', cleanNumber);
    
    try {
      const apiUrl = `https://pair-v44u.onrender.com/code?number=${cleanNumber}`;
      
      const response = await axios.get(apiUrl, {
        timeout: 60000,
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json'
        }
      });
      
      console.log('ğŸ” Response:', response.data);
      
      const data = response.data;
      let code = null;
      
      // âœ… Handle different response formats
      if (typeof data === 'string') {
        code = data;
      } else if (data && data.code) {
        code = data.code;
      } else if (data && data.pairingCode) {
        code = data.pairingCode;
      }
      
      console.log('ğŸ” Extracted Code:', code);
      
      // âœ… Validate code
      if (!code || code === "Service Unavailable" || code.includes("Unavailable") || code.includes("required") || code.includes("error")) {
        pairResult.innerHTML = '<p style="color:#ff5555; font-weight:bold;">âŒ Service temporarily unavailable.<br><small style="color:var(--muted);">Please try again in a moment.</small></p>';
        return;
      }
      
      // âœ… SUCCESS - Display code with instructions
      pairResult.innerHTML = `
        <div style="animation: fadeIn 0.5s;">
          <p style="color:#00ff00; font-weight:bold; font-size:2.5rem; text-shadow: 0 0 25px #00ff00; letter-spacing: 10px; margin: 1.5rem 0; font-family: 'Courier New', monospace;">
            ${code}
          </p>
          <p style="color:white; font-size:1.1rem; margin:1rem 0; font-weight:600;">
            âœ… Pairing Code Generated Successfully!
          </p>
          
          <!-- âœ… STEP-BY-STEP INSTRUCTIONS -->
          <div style="background: rgba(0, 0, 0, 0.4); border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem; text-align: left; border: 1px solid rgba(0, 212, 255, 0.2);">
            <p style="color:#00d4ff; font-size:1rem; font-weight:bold; margin-bottom:1rem; text-align:center;">
              ğŸ“± HOW TO LINK YOUR WHATSAPP
            </p>
            
            <div style="color:white; font-size:0.95rem; line-height: 2; padding: 0 0.5rem;">
              <p style="margin-bottom:0.8rem;">
                <span style="background: linear-gradient(135deg, #FF4500, #228B22); padding: 2px 8px; border-radius: 4px; font-weight: bold;">1</span>
                <span style="margin-left:0.5rem;">Open <b>WhatsApp</b> on your phone</span>
              </p>
              
              <p style="margin-bottom:0.8rem;">
                <span style="background: linear-gradient(135deg, #FF4500, #228B22); padding: 2px 8px; border-radius: 4px; font-weight: bold;">2</span>
                <span style="margin-left:0.5rem;">Tap the <b>3 dots</b> (â‹®) at top right</span>
              </p>
              
              <p style="margin-bottom:0.8rem;">
                <span style="background: linear-gradient(135deg, #FF4500, #228B22); padding: 2px 8px; border-radius: 4px; font-weight: bold;">3</span>
                <span style="margin-left:0.5rem;">Select <b>"Linked Devices"</b></span>
              </p>
              
              <p style="margin-bottom:0.8rem;">
                <span style="background: linear-gradient(135deg, #FF4500, #228B22); padding: 2px 8px; border-radius: 4px; font-weight: bold;">4</span>
                <span style="margin-left:0.5rem;">Tap <b>"Link a Device"</b></span>
              </p>
              
              <p style="margin-bottom:0.8rem;">
                <span style="background: linear-gradient(135deg, #FF4500, #228B22); padding: 2px 8px; border-radius: 4px; font-weight: bold;">5</span>
                <span style="margin-left:0.5rem;">Tap <b>"Link with phone number instead"</b></span>
              </p>
              
              <p style="margin-bottom:0rem;">
                <span style="background: linear-gradient(135deg, #FF4500, #228B22); padding: 2px 8px; border-radius: 4px; font-weight: bold;">6</span>
                <span style="margin-left:0.5rem;">Enter this code:</span>
              </p>
              
              <p style="text-align:center; margin: 1rem 0; font-size:1.8rem; color:#00ff00; font-weight:bold; letter-spacing: 8px; text-shadow: 0 0 15px #00ff00; font-family: 'Courier New', monospace;">
                ${code}
              </p>
            </div>
            
            <p style="color:#ff6b6b; font-size:0.85rem; margin-top:1rem; text-align:center; font-weight:500;">
              â±ï¸ <b>Important:</b> Code expires in 60 seconds!
            </p>
          </div>
        </div>
      `;
      
      copyCodeBtn.style.display = "inline-block";
      
      // âœ… Auto-copy to clipboard
      try {
        await navigator.clipboard.writeText(code);
        console.log('âœ… Code auto-copied to clipboard');
        setTimeout(() => {
          const existingContent = pairResult.innerHTML;
          pairResult.innerHTML = existingContent + '<p style="color:#90EE90; font-size:0.85rem; margin-top:1rem; font-weight:500;">ğŸ“‹ Code automatically copied to clipboard!</p>';
        }, 800);
      } catch (clipErr) {
        console.log('âš ï¸ Auto-copy failed:', clipErr);
      }
      
    } catch (error) {
      console.error('âŒ ERROR:', error);
      
      let errorMsg = 'âŒ Error getting pairing code.';
      let debugInfo = '';
      
      if (error.code === 'ECONNABORTED') {
        errorMsg = 'âŒ Request timeout';
        debugInfo = 'The service is waking up. Please try again in 10 seconds.';
      } else if (error.response) {
        errorMsg = `âŒ Server Error (${error.response.status})`;
        debugInfo = error.response.data?.code || 'Service temporarily unavailable.';
      } else if (error.request) {
        errorMsg = 'âŒ Cannot reach the pairing service';
        debugInfo = 'Please check your internet connection.';
      } else {
        debugInfo = error.message;
      }
      
      pairResult.innerHTML = `
        <p style="color:#ff5555; font-weight:bold; font-size:1.1rem;">${errorMsg}</p>
        <p style="color:var(--muted); font-size:0.9rem; margin-top:0.5rem;">${debugInfo}</p>
      `;
    }
  });

  const audio = document.getElementById('audio1');
  const playBtn = document.querySelector('.play-btn');
  const playIcon = document.getElementById('play-icon');
  const timeDisplay = document.getElementById('time1');
  
  document.addEventListener('click', function initAudio() {
    audio.play().then(() => {
      playIcon.classList.replace('fa-play', 'fa-pause');
      updateTimeDisplay();
    }).catch(error => {
      console.log('Auto-play prevented:', error);
    });
    document.removeEventListener('click', initAudio);
  }, { once: true });

  function togglePlay() {
    if (audio.paused) {
      audio.play();
      playIcon.classList.replace('fa-play', 'fa-pause');
    } else {
      audio.pause();
      playIcon.classList.replace('fa-pause', 'fa-play');
    }
  }

  function updateTimeDisplay() {
    const minutes = Math.floor(audio.currentTime / 60);
    const seconds = Math.floor(audio.currentTime % 60);
    timeDisplay.textContent = `${minutes}:${String(seconds).padStart(2, '0')}`;
    
    if (!audio.paused) {
      requestAnimationFrame(updateTimeDisplay);
    }
  }

  audio.addEventListener('timeupdate', updateTimeDisplay);

  async function updateBattery() {
    if (navigator.getBattery) {
      try {
        const battery = await navigator.getBattery();
        
        const updateBatteryUI = () => {
          const batteryPercent = Math.round(battery.level * 100);
          batteryLevel.textContent = `${batteryPercent}%`;
          
          let iconClass = 'fa-battery-empty';
          if (batteryPercent > 80) iconClass = 'fa-battery-full';
          else if (batteryPercent > 60) iconClass = 'fa-battery-three-quarters';
          else if (batteryPercent > 40) iconClass = 'fa-battery-half';
          else if (batteryPercent > 20) iconClass = 'fa-battery-quarter';
          
          if (battery.charging) {
            batteryIcon.className = `fas fa-bolt ${iconClass}`;
            batteryIcon.style.color = '#00ff00';
          } else {
            batteryIcon.className = `fas ${iconClass}`;
            batteryIcon.style.color = 'var(--highlight)';
          }
        };
        
        battery.addEventListener('levelchange', updateBatteryUI);
        battery.addEventListener('chargingchange', updateBatteryUI);
        updateBatteryUI();
      } catch (error) {
        console.error('Battery API error:', error);
        batteryLevel.textContent = "N/A";
      }
    } else {
      batteryLevel.textContent = "N/A";
    }
  }

  window.addEventListener('load', () => {
    copyCodeBtn.style.display = "none";
    updateBattery();
    
    document.body.style.opacity = '0';
    setTimeout(() => {
      document.body.style.transition = 'opacity 0.5s ease';
      document.body.style.opacity = '1';
    }, 100);
  });
</script>

<!-- âœ… ADD FADE-IN ANIMATION -->
<style>
  @keyframes fadeIn {
    from { 
      opacity: 0; 
      transform: scale(0.95) translateY(10px); 
    }
    to { 
      opacity: 1; 
      transform: scale(1) translateY(0); 
    }
  }
</style>
</body>
</html>
